"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0}),require("reflect-metadata");var n=t(require("hoist-non-react-statics")),r=require("tslib"),i=require("immer"),o=require("react");function e(t){return"function"==typeof t}function u(t){return t&&"object"==typeof t}var c="function"==typeof Symbol?Symbol():"__injector__",f=o.createContext({}),s=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(n,t),n}(o.Component);function a(t){var n,r=t[c];return r||((r=v||(null===(n=t.context)||void 0===n?void 0:n.injector))instanceof s?(t[c]=r,r):void 0)}var v=null;function l(t,n){for(h.length>0&&(h.forEach(function(t){t()}),h.length=0);t;){var r=t.t.get(n);if(void 0!==r)return r;var i=t.i.get(n);if(i){var o=v;v=t;try{r=i(t)}finally{v=o}return t.t.set(n,r),t.o(r),r}t=t.u}}var h=[];function d(t,n){if(e(n))return p(t,n);var r=t;return n?i(r,n):i;function i(t,n){t.constructor.contextType=f,r||(r=Reflect.getMetadata("design:type",t,n));var i={configurable:!0,enumerable:!0,get:function(){var t=p(this,r);return Object.defineProperty(this,n,{enumerable:!0,writable:!0,value:t}),t},set:function(t){Object.defineProperty(this,n,{enumerable:!0,writable:!0,value:t})}};return Object.defineProperty(t,n,i),i}}function p(t,n){return l(a(t),n)}var y="function"==typeof Symbol?Symbol():"__binding__";function b(t){return S(function(n){var r=new t;return r[c]||(r[c]=n),r})}function _(t,n){return S(n?function(r){return n.apply(void 0,t.map(function(t){return l(r,t)}))}:t)}function m(t){return S(function(){return t})}function x(t){return S(function(n){return l(n,t)})}function S(t){return t[y]=!0,t}function j(t,n){n.forEach(function(n){var r,i,o;Array.isArray(n)?(i=n[0],o=void 0===(r=n[1])?i:r):i=o=n,t.set(i,o[y]?o:b(o))})}var w="function"==typeof Symbol?Symbol():"__init__",g=function(){return function(){}}(),q=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return function(i){var c=new Map;j(c,t);var a=function(t){function n(){var n,r=t.apply(this,arguments)||this;return r.u=null===(n=r.context)||void 0===n?void 0:n.injector,r.i=c,r.t=new Map,r}return r.__extends(n,t),n.prototype.o=function(t){var n=this;t instanceof g&&!t[w]&&(t.initProvider(function(){return n.setState({injector:n})}),t[w]=!0)},n.prototype.componentDidMount=function(){var t=this;this.t.forEach(function(n){t.o(n)})},n.prototype.componentWillUnmount=function(){this.t.forEach(function(t){u(t)&&e(t.dispose)&&t.dispose()})},n.prototype.render=function(){return o.createElement(f.Provider,{value:{injector:this}},o.createElement(i,this.props))},n.register=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];j(c,t)},n.WrappedComponent=i,n}(s);return a.contextType=f,n(a,i)}},O=function(t,n){return function(r){return h.push(function(){t().register(n?[r,n]:r)}),r}};function M(t){var n,r=o.useRef(void 0),i=null===(n=o.useContext(f))||void 0===n?void 0:n.injector;return r.current||(r.current=l(i,t))}function A(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=o.useRef(null),e=null===(t=o.useContext(f))||void 0===t?void 0:t.injector;return i.current||(i.current=n.map(function(t){return l(e,t)}))}var R="function"==typeof Symbol?Symbol():"__store__",k="function"==typeof Symbol?Symbol():"__stores__",z="function"==typeof Symbol?Symbol():"__refresh__",B=function(){function t(t){this.count=0,this.service=t}return t.prototype.start=function(t){var n,r=this;if(void 0===t&&(t=!0),0==this.count){var o=this.draft=null!==(n=this.draft)&&void 0!==n?n:i.createDraft(this.service);this.service[k].forEach(function(t){r.service[t]=o[t]})}t&&this.count++},t.prototype.finish=function(t,n){var r=this;if(void 0===t&&(t=!0),void 0===n&&(n=!0),0==this.count)console.warn("the finish method must be called after corresponding start method");else if(n&&this.count--,0==this.count){var o=this.draft;if(o){this.service[k].forEach(function(t){o[t]=r.service[t]});var e=i.finishDraft(o);this.service[k].forEach(function(t){r.service[t]=e[t]}),this.draft=void 0}}t&&this.service.RefreshContext()},t}(),C=function(t){function n(){var n,r=t.call(this)||this;return r[k]=null!==(n=r[k])&&void 0!==n?n:[],r[i.immerable]=!0,r[R]=new B(r),r}return r.__extends(n,t),n.prototype.initProvider=function(t){this[z]=t,this[R].start(),this[R].finish()},n.prototype.RefreshContext=function(){this[z]&&this[z]()},n.prototype.waitForAsync=function(t){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(n){switch(n.label){case 0:this[R].finish(!0,!1),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,t];case 2:return[2,n.sent()];case 3:return this[R].start(!1),[7];case 4:return[2]}})})},n}(g);function D(){return function(t,n){var r,i=t;i[k]=null!==(r=i[k])&&void 0!==r?r:[],i[k].push(n)}}var E=function(t,n){return r.__awaiter(void 0,void 0,void 0,function(){return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,,2,3]),[4,n];case 1:return[2,r.sent()];case 2:return t[R].finish(),[7];case 3:return[2]}})})},F=function(t){return t&&"function"==typeof t.then};function G(){return function(t,n,r){var i=r.value;r.value=function(t){this[R].start();var n=!1;try{var r=i.call(this,t);return(n=F(r))?E(this,r):r}finally{n||this[R].finish()}}}}var H=function(t){var n=t.services,r=t.children,i=t.deps,e=o.useCallback(q.apply(void 0,n)(function(){return o.createElement(o.Fragment,{},r)}),null!=i?i:[]);return o.createElement(e)};exports.original=i.original,exports.enableES5=i.enableES5,exports.enableMapSet=i.enableMapSet,exports.InjectedService=g,exports.inject=d,exports.provider=q,exports.registerIn=O,exports.Inject=d,exports.Provider=q,exports.RegisterIn=O,exports.toClass=b,exports.toExisting=x,exports.toFactory=_,exports.toValue=m,exports.useInstance=M,exports.useInstances=A,exports.ImmutableService=C,exports.action=G,exports.store=D,exports.ComponentWithServices=H;
//# sourceMappingURL=index.min.js.map
