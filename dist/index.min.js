"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("reflect-metadata");var n=require("tslib"),t=require("react"),r=require("hoist-non-react-statics");function u(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var i=u(r),e=function(){function n(){this.handlers=[]}return n.prototype.on=function(n){return this.handlers.push(n),n},n.prototype.off=function(n){this.handlers=this.handlers.filter(function(t){return t!==n})},n.prototype.trigger=function(n){this.handlers.slice(0).forEach(function(t){return t(n)})},n}();function o(n){return"function"==typeof n}function f(n){return n&&"object"==typeof n}var c="function"==typeof Symbol?Symbol():"__injector__",a=t.createContext({}),v=function(t){function r(){var n=null!==t&&t.apply(this,arguments)||this;return n.t=new e,n}return n.__extends(r,t),r}(t.Component);function s(n){var t,r=n[c];return r||((r=l||(null===(t=n.context)||void 0===t?void 0:t.injector))instanceof v?(n[c]=r,r):void 0)}var l=null;function p(n,t){for(b.length>0&&(b.forEach(function(n){n()}),b.length=0);n;){var r=n.u.get(t);if(void 0!==r)return r;var u=n.i.get(t);if(u){var i=l;l=n;try{r=u(n)}finally{l=i}return n.u.set(t,r),n.o(r),r}n=n.v}}var b=[];function d(n,t){if(o(t))return h(n,t);var r=n;return t?u(r,t):u;function u(n,t){n.constructor.contextType=a,r||(r=Reflect.getMetadata("design:type",n,t));var u={configurable:!0,enumerable:!0,get:function(){var n=h(this,r);return Object.defineProperty(this,t,{enumerable:!0,writable:!0,value:n}),n},set:function(n){Object.defineProperty(this,t,{enumerable:!0,writable:!0,value:n})}};return Object.defineProperty(n,t,u),u}}function h(n,t){return p(s(n),t)}var y="function"==typeof Symbol?Symbol():"__binding__";function x(n){return w(function(t){var r=new n;return r[c]||(r[c]=t),r})}function _(n,t){return w(t?function(r){return t.apply(void 0,n.map(function(n){return p(r,n)}))}:n)}function j(n){return w(function(){return n})}function m(n){return w(function(t){return p(t,n)})}function w(n){return n[y]=!0,n}function S(n,t){t.forEach(function(t){var r,u,i;"object"==typeof t&&t.token&&t.binding&&(u=t.token,i=t.binding),Array.isArray(t)?(u=t[0],i=void 0===(r=t[1])?u:r):u=i=t,n.set(u,i[y]?i:x(i))})}var g="function"==typeof Symbol?Symbol():"__init__",q=function(){return function(){}}(),O=function(){for(var r=[],u=0;u<arguments.length;u++)r[u]=arguments[u];return function(u){var e=new Map;S(e,r);var c=function(r){function i(){var n,t=this;return(t=r.apply(this,arguments)||this).v=null===(n=t.context)||void 0===n?void 0:n.injector,t.i=e,t.u=new Map,t.state={injector:t},t}return n.__extends(i,r),i.prototype.o=function(n){var t=this;n instanceof q&&!n[g]&&(n.initProvider(function(){t.setState({injector:t}),t.t.trigger()}),n[g]=!0)},i.prototype.componentDidMount=function(){var n=this;this.u.forEach(function(t){n.o(t)})},i.prototype.componentWillUnmount=function(){this.u.forEach(function(n){f(n)&&o(n.dispose)&&n.dispose()})},i.prototype.render=function(){return t.createElement(a.Provider,{value:this.state},t.createElement(u,this.props))},i.register=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];S(e,n)},i.WrappedComponent=u,i}(v);return c.contextType=a,i.default(c,u)}},M=function(n,t){return function(r){return b.push(function(){n().register(t?[r,t]:r)}),r}};function A(n){var r,u=t.useRef(void 0),i=null===(r=t.useContext(a))||void 0===r?void 0:r.injector,e=u.current||(u.current=p(i,n)),o=t.useState({})[1],f=t.useRef({updater:o});return t.useEffect(function(){var t,r;if(i&&e&&!i.u.has(n))for(var u=i.v;u;)u.u.has(n)&&(r=u,t=u.t.on(function(){return f.current.updater({})})),u=u.v;return function(){f.current.updater=function(){},r&&r.t.off(t)}},[]),e}function R(){for(var n,r=[],u=0;u<arguments.length;u++)r[u]=arguments[u];var i=t.useRef(null),e=null===(n=t.useContext(a))||void 0===n?void 0:n.injector,o=i.current||(i.current=r.map(function(n){return p(e,n)})),f=t.useState({})[1],c=t.useRef({updater:f});return t.useEffect(function(){var n=[];return e&&r.forEach(function(t){if(!e.u.has(t))for(var r=e.v;r;)r.u.has(t)&&n.push({publisher:r,event:r.t.on(function(){return c.current.updater({})})}),r=r.v}),function(){c.current.updater=function(){},n.forEach(function(n){return n.publisher.t.off(n.event)})}},[]),o}var k=function(n){var r=n.children;return t.createElement(t.Fragment,null,r)},z=function(n){var r=n.services,u=n.children,i=t.useRef(O.apply(void 0,r)(k));return t.createElement(i.current,null,u)};exports.ComponentWithServices=z,exports.Inject=d,exports.InjectedService=q,exports.LiteEventImpl=e,exports.Provider=O,exports.RegisterIn=M,exports.inject=d,exports.provider=O,exports.registerIn=M,exports.toClass=x,exports.toExisting=m,exports.toFactory=_,exports.toValue=j,exports.useInstance=A,exports.useInstances=R;
//# sourceMappingURL=index.min.js.map
