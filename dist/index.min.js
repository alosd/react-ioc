"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0}),require("reflect-metadata");var n=t(require("hoist-non-react-statics")),r=require("react"),i=require("tslib"),e=require("immer");function o(t){return"function"==typeof t}function u(t){return t&&"object"==typeof t}var c="function"==typeof Symbol?Symbol():"__injector__",f=r.createContext({}),s=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(n,t),n}(r.Component);function a(t){var n,r=t[c];return r||((r=v||(null===(n=t.context)||void 0===n?void 0:n.injector))instanceof s?(t[c]=r,r):void 0)}var v=null;function h(t,n){for(l.length>0&&(l.forEach(function(t){t()}),l.length=0);t;){var r=t.t.get(n);if(void 0!==r)return r;var i=t.i.get(n);if(i){var e=v;v=t;try{r=i(t)}finally{v=e}return t.t.set(n,r),r}t=t.o}}var l=[];function p(t,n){if(o(n))return d(t,n);var r=t;return n?i(r,n):i;function i(t,n){t.constructor.contextType=f,r||(r=Reflect.getMetadata("design:type",t,n));var i={configurable:!0,enumerable:!0,get:function(){var t=d(this,r);return Object.defineProperty(this,n,{enumerable:!0,writable:!0,value:t}),t},set:function(t){Object.defineProperty(this,n,{enumerable:!0,writable:!0,value:t})}};return Object.defineProperty(t,n,i),i}}function d(t,n){return h(a(t),n)}var b="function"==typeof Symbol?Symbol():"__binding__";function y(t){return S(function(n){var r=new t;return r[c]||(r[c]=n),r})}function _(t,n){return S(n?function(r){return n.apply(void 0,t.map(function(t){return h(r,t)}))}:t)}function x(t){return S(function(){return t})}function m(t){return S(function(n){return h(n,t)})}function S(t){return t[b]=!0,t}function j(t,n){n.forEach(function(n){var r,i,e;Array.isArray(n)?(i=n[0],e=void 0===(r=n[1])?i:r):i=e=n,t.set(i,e[b]?e:y(e))})}var w=function(){return function(){}}(),g=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var c=new Map;j(c,t);var a=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.o=n.context,n.i=c,n.t=new Map,n}return i.__extends(n,t),n.prototype.componentDidMount=function(){var t=this;this.t.forEach(function(n){n instanceof w&&n.initProvider(function(){return t.setState({injector:t})})})},n.prototype.componentWillUnmount=function(){this.t.forEach(function(t){u(t)&&o(t.dispose)&&t.dispose()})},n.prototype.render=function(){return r.createElement(f.Provider,{value:{injector:this}},r.createElement(e,this.props))},n.register=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];j(c,t)},n.WrappedComponent=e,n}(s);return a.contextType=f,n(a,e)}},q=function(t,n){return function(r){return l.push(function(){t().register(n?[r,n]:r)}),r}};function O(t){var n,i=r.useRef(void 0),e=null===(n=r.useContext(f))||void 0===n?void 0:n.injector;return i.current||(i.current=h(e,t))}function M(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var e=r.useRef(null),o=null===(t=r.useContext(f))||void 0===t?void 0:t.injector;return e.current||(e.current=n.map(function(t){return h(o,t)}))}var A="function"==typeof Symbol?Symbol():"__store__",R="function"==typeof Symbol?Symbol():"__stores__",k="function"==typeof Symbol?Symbol():"__refresh__",z=function(){function t(t){this.count=0,this.service=t}return t.prototype.start=function(t){var n,r=this;if(void 0===t&&(t=!0),0==this.count){var i=this.draft=null!==(n=this.draft)&&void 0!==n?n:e.createDraft(this.service);this.service[R].forEach(function(t){r.service[t]=i[t]})}t&&this.count++},t.prototype.finish=function(t,n){var r=this;if(void 0===t&&(t=!0),void 0===n&&(n=!0),0==this.count)console.warn("the finish method must be called after corresponding start method");else if(n&&this.count--,0==this.count){var i=this.draft;if(i){this.service[R].forEach(function(t){i[t]=r.service[t]});var o=e.finishDraft(i);this.service[R].forEach(function(t){r.service[t]=o[t]}),this.draft=void 0}}t&&this.service.RefreshContext()},t}(),B=function(t){function n(){var n,r=t.call(this)||this;return r[R]=null!==(n=r[R])&&void 0!==n?n:[],r[e.immerable]=!0,r[A]=new z(r),r}return i.__extends(n,t),n.prototype.initProvider=function(t){this[k]=t,this[A].start(),this[A].finish()},n.prototype.RefreshContext=function(){this[k]&&this[k]()},n.prototype.waitForAsync=function(t){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(n){switch(n.label){case 0:this[A].finish(!0,!1),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,t];case 2:return[2,n.sent()];case 3:return this[A].start(!1),[7];case 4:return[2]}})})},n}(w);function C(){return function(t,n){var r,i=t;i[R]=null!==(r=i[R])&&void 0!==r?r:[],i[R].push(n)}}var D=function(t,n){return i.__awaiter(void 0,void 0,void 0,function(){return i.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,,2,3]),[4,n];case 1:return[2,r.sent()];case 2:return t[A].finish(),[7];case 3:return[2]}})})},E=function(t){return t&&"function"==typeof t.then};function F(){return function(t,n,r){var i=r.value;r.value=function(t){this[A].start();var n=!1;try{var r=i.call(this,t);return(n=E(r))?D(this,r):r}finally{n||this[A].finish()}}}}exports.original=e.original,exports.enableES5=e.enableES5,exports.enableMapSet=e.enableMapSet,exports.InjectedService=w,exports.inject=p,exports.provider=g,exports.registerIn=q,exports.Inject=p,exports.Provider=g,exports.RegisterIn=q,exports.toClass=y,exports.toExisting=m,exports.toFactory=_,exports.toValue=x,exports.useInstance=O,exports.useInstances=M,exports.ImmutableService=B,exports.action=F,exports.store=C;
//# sourceMappingURL=index.min.js.map
