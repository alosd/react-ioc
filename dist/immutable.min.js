"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("hoist-non-react-statics");var t=require("tslib"),n=require("react"),i=require("immer"),r=function(){function t(){this.handlers=[]}return t.prototype.on=function(t){return this.handlers.push(t),t},t.prototype.off=function(t){this.handlers=this.handlers.filter(function(n){return n!==t})},t.prototype.trigger=function(t){this.handlers.slice(0).forEach(function(n){return n(t)})},t}(),e=n.createContext({}),o=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.t=new r,t}return t.__extends(i,n),i}(n.Component),s=function(){return function(){}}(),u="function"==typeof Symbol?Symbol():"__store__",c="function"==typeof Symbol?Symbol():"__stores__",f="function"==typeof Symbol?Symbol():"__refresh__",h=function(){function t(t){this.count=0,this.service=t}return t.prototype.start=function(t){var n,r=this;if(void 0===t&&(t=!0),0==this.count){var e=this.draft=null!==(n=this.draft)&&void 0!==n?n:i.createDraft(this.service);this.service[c].forEach(function(t){r.service[t]=e[t]})}t&&this.count++},t.prototype.finish=function(t,n){var r=this;if(void 0===t&&(t=!0),void 0===n&&(n=!0),0==this.count)console.warn("the finish method must be called after corresponding start method");else if(n&&this.count--,0==this.count){var e=this.draft;if(e){this.service[c].forEach(function(t){e[t]=r.service[t]});var o=i.finishDraft(e);this.service[c].forEach(function(t){r.service[t]=o[t]}),this.draft=void 0}}t&&this.service.RefreshContext()},t}(),a=function(n){function r(){var t,r=n.call(this)||this;return r[c]=null!==(t=r[c])&&void 0!==t?t:[],r[i.immerable]=!0,r[u]=new h(r),r}return t.__extends(r,n),r.prototype.initProvider=function(t){this[f]=t,this[u].start(),this[u].finish()},r.prototype.RefreshContext=function(){this[f]&&this[f]()},r.prototype.waitForAsync=function(n){return t.__awaiter(this,void 0,void 0,function(){return t.__generator(this,function(t){switch(t.label){case 0:this[u].finish(!0,!1),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,n];case 2:return[2,t.sent()];case 3:return this[u].start(!1),[7];case 4:return[2]}})})},r}(s);function v(){return function(t,n){var i,r=t;r[c]=null!==(i=r[c])&&void 0!==i?i:[],r[c].push(n)}}var l=function(n,i){return t.__awaiter(void 0,void 0,void 0,function(){return t.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,,2,3]),[4,i];case 1:return[2,t.sent()];case 2:return n[u].finish(),[7];case 3:return[2]}})})},d=function(t){return t&&"function"==typeof t.then};function _(){return function(t,n,i){var r=i.value;i.value=function(t){this[u].start();var n=!1;try{var i=r.call(this,t);return(n=d(i))?l(this,i):i}finally{n||this[u].finish()}}}}exports.original=i.original,exports.enableES5=i.enableES5,exports.enableMapSet=i.enableMapSet,exports.ImmutableService=a,exports.action=_,exports.store=v;
//# sourceMappingURL=immutable.min.js.map
