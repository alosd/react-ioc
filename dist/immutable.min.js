"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("tslib"),n=require("immer"),i=require("react");require("hoist-non-react-statics");var r=function(){function t(){this.handlers=[]}return t.prototype.on=function(t){return this.handlers.push(t),t},t.prototype.off=function(t){this.handlers=this.handlers.filter(function(n){return n!==t})},t.prototype.trigger=function(t){this.handlers.slice(0).forEach(function(n){return n(t)})},t}();i.createContext({}),function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.t=new r,t}t.__extends(i,n)}(i.Component);var e=function(){return function(){}}(),u="function"==typeof Symbol?Symbol():"__store__",o="function"==typeof Symbol?Symbol():"__stores__",s="function"==typeof Symbol?Symbol():"__refresh__",c=function(){function t(t){this.count=0,this.service=t}return t.prototype.start=function(t){var i,r=this;if(void 0===t&&(t=!0),0==this.count){var e=this.draft=null!==(i=this.draft)&&void 0!==i?i:n.createDraft(this.service);this.service[o].forEach(function(t){r.service[t]=e[t]})}t&&this.count++},t.prototype.finish=function(t,i){var r=this;if(void 0===t&&(t=!0),void 0===i&&(i=!0),0==this.count)console.warn("the finish method must be called after corresponding start method");else if(i&&this.count--,0==this.count){var e=this.draft;if(e){this.service[o].forEach(function(t){e[t]=r.service[t]});var u=n.finishDraft(e);this.service[o].forEach(function(t){r.service[t]=u[t]}),this.draft=void 0}}t&&this.service.RefreshContext()},t}(),f=function(i){function r(){var t,r=this;return(r=i.call(this)||this)[o]=null!==(t=r[o])&&void 0!==t?t:[],r[n.immerable]=!0,r[u]=new c(r),r}return t.__extends(r,i),r.prototype.initProvider=function(t){this[s]=t,this[u].start(),this[u].finish()},r.prototype.RefreshContext=function(){this[s]&&this[s]()},r.prototype.waitForAsync=function(n){return t.__awaiter(this,void 0,void 0,function(){return t.__generator(this,function(t){switch(t.label){case 0:this[u].finish(!0,!1),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,n];case 2:return[2,t.sent()];case 3:return this[u].start(!1),[7];case 4:return[2]}})})},r}(e);function h(){return function(t,n){var i,r=t;r[o]=null!==(i=r[o])&&void 0!==i?i:[],r[o].push(n)}}var a=function(n,i){return t.__awaiter(void 0,void 0,void 0,function(){return t.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,,2,3]),[4,i];case 1:return[2,t.sent()];case 2:return n[u].finish(),[7];case 3:return[2]}})})},l=function(t){return t&&"function"==typeof t.then};function v(){return function(t,n,i){var r=i.value;i.value=function(t){this[u].start();var n=!1;try{var i=r.call(this,t);return(n=l(i))?a(this,i):i}finally{n||this[u].finish()}}}}Object.defineProperty(exports,"enableES5",{enumerable:!0,get:function(){return n.enableES5}}),Object.defineProperty(exports,"enableMapSet",{enumerable:!0,get:function(){return n.enableMapSet}}),Object.defineProperty(exports,"original",{enumerable:!0,get:function(){return n.original}}),exports.ImmutableService=f,exports.action=v,exports.store=h;
//# sourceMappingURL=immutable.min.js.map
